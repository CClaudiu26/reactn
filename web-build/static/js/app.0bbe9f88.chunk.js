(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{238:function(e,t,a){"use strict";a.d(t,"a",(function(){return G}));a(328);var n=a(137),r=a(0),o=a.n(r),c=a(2),i=a(177),l=a(16),s=a.n(l),u=a(3),m=a(30),d=a(82),h=a(73),p=(a(316),a(317),(0===h.apps.length?h.initializeApp({apiKey:"AIzaSyCUBgkkJxVmQaw-jnVckmolrwGnl57tm5Q",authDomain:"signal-clone-a03c8.firebaseapp.com",projectId:"signal-clone-a03c8",storageBucket:"signal-clone-a03c8.appspot.com",messagingSenderId:"563597380135",appId:"1:563597380135:web:bac5e9fc6ddb22f95c5c02"}):h.app()).firestore()),f=h.auth(),g=a(53),E=a(58),y=function(e){var t=e.navigation,a=Object(r.useState)(""),c=s()(a,2),i=c[0],l=c[1],h=Object(r.useState)(""),p=s()(h,2),y=p[0],v=p[1];Object(r.useEffect)((function(){return f.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var C=function(){f.signInWithEmailAndPassword(i,y).catch((function(e){return alert(e)}))};return o.a.createElement(d.a,{behavior:"padding",style:b.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(E.a,{onPress:g.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{style:b.inputContainer},o.a.createElement(m.c,{placeholder:"Email",autofocus:!0,type:"email",value:i,onChangeText:function(e){return l(e)}}),o.a.createElement(m.c,{placeholder:"Password",secureTextEntry:!0,type:"password",value:y,onChangeText:function(e){return v(e)},onSubmitEditing:C})),o.a.createElement(m.b,{containerStyle:b.button,onPress:C,title:"Login"}),o.a.createElement(m.b,{onPress:function(){return t.navigate("Register")},containerStyle:b.button,type:"outline",title:"Register"}),o.a.createElement(u.a,{style:{height:170}}))))},b=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),v=a(343),C=a(32),w=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),c=n[0],i=n[1],l=Object(r.useState)(""),h=s()(l,2),p=h[0],g=h[1],E=Object(r.useState)(""),y=s()(E,2),b=y[0],v=y[1],w=Object(r.useState)(""),x=s()(w,2),O=x[0],k=x[1];Object(r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Back to Login"})}),[t]);var T=function(){f.createUserWithEmailAndPassword(p,b).then((function(e){e.user.updateProfile({displayName:c,photoURL:O||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return o.a.createElement(d.a,{behavior:"padding",style:S.container},o.a.createElement(C.a,{style:"light"}),o.a.createElement(m.e,{h3:!0,style:{marginBottom:50}},"Create a Account"),o.a.createElement(u.a,{style:S.inputContainer},o.a.createElement(m.c,{placeholder:"Full Name",autofocus:!0,type:"text",value:c,onChangeText:function(e){return i(e)}}),o.a.createElement(m.c,{placeholder:"Email",type:"email",value:p,onChangeText:function(e){return g(e)}}),o.a.createElement(m.c,{placeholder:"Password",secureTextEntry:!0,type:"password",value:b,onChangeText:function(e){return v(e)}}),o.a.createElement(m.c,{placeholder:"Profile Picture Url (Optional)",type:"text",value:O,onChangeText:function(e){return k(e)},onSubmitEditing:T})),o.a.createElement(m.b,{containerStyle:S.button,raised:!0,onPress:T,title:"Register"}),o.a.createElement(u.a,{style:{height:170}}))},S=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),x=a(49),O=a(21),k=a(115),T=a(229),j=a(224),L=function(e){var t,a,n,c=e.id,i=e.chatName,l=e.enterChat,u=Object(r.useState)([]),d=s()(u,2),h=d[0],f=d[1];return Object(r.useEffect)((function(){return p.collection("chats").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))}),[]),o.a.createElement(m.d,{key:c,onPress:function(){return l(c,i)},key:c,bottomDivider:!0},o.a.createElement(m.a,{rounded:!0,source:{uri:(null==h||null==(t=h[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(m.d.Content,null,o.a.createElement(m.d.Title,{style:{fontWeight:"800"}},i),o.a.createElement(m.d.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==h||null==(a=h[0])?void 0:a.displayName," : ",null==h||null==(n=h[0])?void 0:n.message)))},R=(c.a.create({}),function(e){var t=e.navigation,a=Object(r.useState)([]),n=s()(a,2),c=n[0],i=n[1],l=function(){f.signOut().then((function(){t.replace("Login")}))};Object(r.useEffect)((function(){return p.collection("chats").onSnapshot((function(e){return i(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"ClauApp",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintStyle:"black",headerLeft:function(){var e;return o.a.createElement(u.a,{style:{marginLeft:20}},o.a.createElement(O.a,{onPress:l,activeOpacity:.5},o.a.createElement(m.a,{rounded:!0,source:{uri:null==f||null==(e=f.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(O.a,{activeOpacity:.5},o.a.createElement(T.a,{name:"camerao",size:24,color:"black"})),o.a.createElement(O.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5},o.a.createElement(j.a,{name:"pencil",size:24,color:"black"})))}})}),[]);var d=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return o.a.createElement(k.a,null,o.a.createElement(x.a,{style:P.container},c.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(L,{key:t,id:t,chatName:a,enterChat:d})}))))}),P=c.a.create({container:{height:"100%"}}),B=a(19),N=a.n(B),U=a(136),z=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),c=n[0],i=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return N.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.awrap(p.collection("chats").add({chatName:c}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return o.a.createElement(u.a,{style:I.container},o.a.createElement(m.c,{placeholder:"Enter a chat name",value:c,onChangeText:function(e){return i(e)},onSubmitEditing:l,leftIcon:o.a.createElement(U.default,{name:"wechat",type:"antdesign",size:24,color:"black"})}),o.a.createElement(m.b,{disabled:!c,onPress:l,title:"Create new Chat"}))},I=c.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),A=a(26),W=a(219),D=a(210),V=a(8),F=a(51),J=function(e){var t=e.navigation,a=e.route,n=Object(r.useState)(""),c=s()(n,2),i=c[0],l=c[1],y=Object(r.useState)([]),b=s()(y,2),v=b[0],w=b[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerTitleAlign:"left",headerBackTitleVisible:!1,headerTitle:function(){return o.a.createElement(u.a,{style:{alignItems:"center",flexDirection:"row"}},o.a.createElement(m.a,{rounded:!0,source:{uri:"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(A.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return o.a.createElement(O.a,{style:{marginLeft:10},onPress:t.goBack},o.a.createElement(T.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(O.a,null,o.a.createElement(W.a,{name:"video-camera",size:24,color:"white"})),o.a.createElement(O.a,null,o.a.createElement(D.a,{name:"call",size:24,color:"white"})))}})}),[t]);var S=function(){g.a.dismiss(),p.collection("chats").doc(a.params.id).collection("messages").add({timestamp:h.firestore.FieldValue.serverTimestamp(),message:i,displayName:f.currentUser.displayName,email:f.currentUser.email,photoURL:f.currentUser.photoURL}),l("")};return Object(r.useLayoutEffect)((function(){return p.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return w(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),o.a.createElement(k.a,{style:{flex:1,backgroundColor:"white"}},o.a.createElement(C.a,{style:"light"}),o.a.createElement(d.a,{behavior:"ios"===V.a.OS?"padding":"height",style:H.container,keyboardVerticalOffset:90},o.a.createElement(E.a,{onPress:g.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{contentContainerStyle:{paddingTop:15}},v.map((function(e){var t=e.id,a=e.data;return a.email===f.currentUser.email?o.a.createElement(u.a,{key:t,style:H.reciever},o.a.createElement(m.a,{position:"absolute",containerStyle:{position:"absolute",bottom:-15,right:-5},size:30,rounded:!0,bottom:-15,right:-5,source:{uri:a.photoURL}}),o.a.createElement(A.a,{style:H.recieverText},a.message," ")):o.a.createElement(u.a,{style:H.sender},o.a.createElement(m.a,{position:"absolute",containerStyle:{position:"absolute",bottom:-15,left:-5},size:30,rounded:!0,bottom:-15,left:-5,source:{uri:a.photoURL}}),o.a.createElement(A.a,{style:H.senderText},a.message," "),o.a.createElement(A.a,{style:H.senderName},a.displayName," "))}))),o.a.createElement(u.a,{style:H.footer},o.a.createElement(F.a,{value:i,onSubmitEditing:S,onChangeText:function(e){return l(e)},placeholder:"Message",style:H.textInput}),o.a.createElement(O.a,{onPress:S,activeOpacity:.5},o.a.createElement(D.a,{name:"send",size:24,color:"#2B68E6"})))))))},H=c.a.create({container:{flex:1},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,backgroundColor:"#ECECEC",padding:10,color:"grey",borderRadius:30},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},recieverText:{color:"black",fontWeight:"500",marginLeft:10}}),M=Object(v.a)(),Q={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function G(){return o.a.createElement(i.a,null,o.a.createElement(M.Navigator,{screenOptions:Q},o.a.createElement(M.Screen,{name:"Login",component:y}),o.a.createElement(M.Screen,{name:"Register",component:w}),o.a.createElement(M.Screen,{name:"Home",component:R}),o.a.createElement(M.Screen,{name:"AddChat",component:z}),o.a.createElement(M.Screen,{name:"Chat",component:J})))}c.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},249:function(e,t,a){e.exports=a(329)}},[[249,1,2]]]);
//# sourceMappingURL=app.0bbe9f88.chunk.js.map